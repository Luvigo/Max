{% extends "base_dashboard.html" %}

{% block title %}Seleccionar Institución - MAX-IDE{% endblock %}

{% block content %}
<div class="page-header" style="text-align: center; max-width: 600px; margin: 0 auto 2rem;">
    <h1 class="page-title">
        <i class="fas fa-building" style="color: var(--color-purple);"></i>
        Selecciona tu Institución
    </h1>
    <p class="page-subtitle">Tienes acceso a múltiples instituciones. Selecciona una para continuar.</p>
</div>

<div style="max-width: 600px; margin: 0 auto;">
    {% for membership in memberships %}
    <a href="{% if membership.role == 'admin' %}{% url 'admin_dashboard' %}{% elif membership.role == 'institution' %}{% url 'institution_dashboard' slug=membership.institution.slug %}{% elif membership.role == 'tutor' %}{% url 'tutor_dashboard' slug=membership.institution.slug %}{% else %}{% url 'student_dashboard' slug=membership.institution.slug %}{% endif %}" class="card animate-in" style="display: block; text-decoration: none; color: inherit; margin-bottom: 1rem; transition: all var(--transition-fast);">
        <div class="card-body" style="display: flex; align-items: center; gap: 1rem;">
            <div style="width: 56px; height: 56px; background: linear-gradient(135deg, var(--color-purple), var(--color-primary)); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: white; font-weight: 700;">
                {{ membership.institution.name|slice:":1"|upper }}
            </div>
            <div style="flex: 1;">
                <div style="font-weight: 600; font-size: 1.1rem; margin-bottom: 0.25rem;">
                    {{ membership.institution.name }}
                </div>
                <div style="color: var(--color-text-muted); font-size: 0.85rem;">
                    {{ membership.institution.code }}
                </div>
            </div>
            <div>
                <span class="status-badge {% if membership.role == 'admin' %}active{% elif membership.role == 'institution' %}pending{% else %}active{% endif %}" style="background: {% if membership.role == 'admin' %}var(--color-danger-glow); color: var(--color-danger);{% elif membership.role == 'institution' %}var(--color-purple-glow); color: var(--color-purple);{% elif membership.role == 'tutor' %}var(--color-warning-glow); color: var(--color-warning);{% else %}var(--color-success-glow); color: var(--color-success);{% endif %}">
                    <i class="fas {% if membership.role == 'admin' %}fa-crown{% elif membership.role == 'institution' %}fa-building{% elif membership.role == 'tutor' %}fa-chalkboard-teacher{% else %}fa-user-graduate{% endif %}"></i>
                    {{ membership.get_role_display }}
                </span>
            </div>
            <div style="color: var(--color-text-muted);">
                <i class="fas fa-chevron-right"></i>
            </div>
        </div>
    </a>
    {% empty %}
    <div class="empty-state">
        <i class="fas fa-building"></i>
        <p>No tienes acceso a ninguna institución</p>
        <p style="font-size: 0.85rem;">Contacta al administrador del sistema</p>
    </div>
    {% endfor %}
</div>

<style>
    .card:hover {
        border-color: var(--color-primary);
        box-shadow: var(--shadow-glow);
        transform: translateY(-2px);
    }
</style>
{% endblock %}
