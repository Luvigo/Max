@startuml
title Módulo 3: Tutores (CRUD en Django Admin)
left to right direction

actor Admin
actor Tutor

rectangle "Módulo 3: Gestión de Tutores" {
  usecase "Crear tutor\n(User + TutorProfile + Membership)" as UC_CreateTutor
  usecase "Editar perfil tutor" as UC_EditTutor
  usecase "Activar/Desactivar tutor" as UC_ToggleTutor
  usecase "Asignar institución" as UC_AssignInst
  usecase "Ver listado de tutores" as UC_ListTutors
  
  usecase "Ver mi perfil\n(Read-Only)" as UC_ViewProfile
  usecase "Ver mis cursos" as UC_ViewCourses
  usecase "Ver mis estadísticas" as UC_ViewStats
  
  usecase "ERROR: Email duplicado" as E_Dupe
  usecase "ERROR: Tutor inactivo" as E_Inactive
  usecase "ERROR: Falta institución" as E_NoInst
  usecase "ERROR: Acceso denegado" as E_403
}

Admin --> UC_CreateTutor : "Solo en /admin/"
Admin --> UC_EditTutor
Admin --> UC_ToggleTutor
Admin --> UC_AssignInst
Admin --> UC_ListTutors

Tutor --> UC_ViewProfile : "Read-Only"
Tutor --> UC_ViewCourses
Tutor --> UC_ViewStats

UC_CreateTutor ..> E_Dupe : <<extend>>
UC_CreateTutor ..> E_NoInst : <<extend>>
UC_ViewProfile ..> E_Inactive : <<extend>>
UC_ViewProfile ..> E_403 : <<extend>>

note right of UC_CreateTutor
  **REGLA CLAVE:**
  Todo CRUD de TutorProfile
  vive en Django Admin.
  NO hay rutas tipo
  /admin-panel/tutors
end note

note bottom of UC_ViewProfile
  Ruta: /i/<slug>/tutor/profile/
  Template: tutor/profile.html
  Decorator: @tutor_required
  
  **Solo lectura**
  Para editar, contactar admin.
end note

note right of E_Inactive
  Si TutorProfile.status != 'active'
  o Membership.is_active = False,
  se bloquea acceso a vistas /tutor/
end note
@enduml
